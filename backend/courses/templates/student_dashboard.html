<!DOCTYPE html>
{% load static %}
<html>
<head>
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="{% static 'courses/dashboard.css' %}">
</head>
<body>
    <button id="theme-toggle"
        style="
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 99999;
          padding: 10px 16px;
          background: red;
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          cursor: pointer;
        ">
  Dark Mode
</button>
    </button>

<h1 class="page-title">My Learning Dashboard</h1>

<div class="dashboard-grid">
{% for c in dashboard %}
    <div class="course-card">

        <h2 class="course-title">{{ c.course }}</h2>

        <!-- BIG, CLEAR PERCENT TEXT -->
        <div class="progress-header">
            <span class="progress-small">
                ({{ c.completed }} / {{ c.total_lessons }} lessons)
            </span>
        </div>

        <!-- PROGRESS BAR -->
        <div class="progress-container">
            <div class="progress-bar" style="--progress: {{ c.progress }}%"></div>
            <span class="progress-big">{{ c.progress }}%</span>
        </div>

        <div class="course-actions">
            <a href="/api/student/course/{{ c.course_id }}/resume/" class="btn">
                â–¶ Continue Learning
            </a>

            <a href="/courses/{{ c.course_id }}/lessons/" class="btn-secondary">
                View Lessons
            </a>
        </div>

        <a href="{% url 'notifications' %}" class="notification-link">
            ðŸ”” View Notifications
        </a>

    </div>
{% endfor %}
</div>
<script>
  
    const themeToggleBtn = document.getElementById('theme-toggle');
    const body = document.body;
    
    // Check for saved theme in localStorage
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        body.classList.add(savedTheme);
        themeToggleBtn.textContent = savedTheme === 'dark-mode' ? 'Light Mode' : 'Dark Mode';
    }
    
    themeToggleBtn.addEventListener('click', () => {
        if (body.classList.contains('dark-mode')) {
        body.classList.remove('dark-mode');
        body.classList.add('light-mode');
        themeToggleBtn.textContent = 'Dark Mode';
        localStorage.setItem('theme', 'light-mode');
        } else {
        body.classList.remove('light-mode');
        body.classList.add('dark-mode');
        themeToggleBtn.textContent = 'Light Mode';
        localStorage.setItem('theme', 'dark-mode');
        }
    });
</script>

</body>
</html>